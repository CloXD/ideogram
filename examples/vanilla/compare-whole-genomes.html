<!DOCTYPE html>
<html>
<head>
  <title>Compare whole genomes | Ideogram</title>
  <style>
    body {font: 14px Arial; line-height: 19.6px; padding: 0 15px;}
    a, a:visited {text-decoration: none;}
    a:hover {text-decoration: underline;}
    a, a:hover, a:visited, a:active {color: #0366d6;}
  </style>
  <style>
    #ideogram-container {
      float: left;
      margin-left: 100px;
      height: 650px;
      width: 70%;
    }

    #options {
      float: left;
    }

    ul {
      padding: 2px 10px 10px 10px;
    }

    ul li {
      list-style-type: none;
      padding-inline-start: 20px;
    }
  </style>
  <script type="text/javascript" src="../../dist/js/ideogram.min.js"></script>
<link rel="icon" type="image/x-icon" href="img/ideogram_favicon.ico">
</head>
<body>
  <h1>Compare whole genomes | Ideogram</h1>
  <a href="../">Overview</a> |
  <a href="annotations-heatmap">Previous</a> |
  <a href="layout-small">Next</a> |
  <a href="https://github.com/eweitz/ideogram/blob/gh-pages/synteny.html" target="_blank">Source</a>
  <div>
    <ul id="options">
      Chromosome scale
      <li>
        <input type="radio" name="chromosome-scale" id="relative" value="relative" checked>
        <label for="relative">Relative</label>
      </li>
      <li>
        <input type="radio" name="chromosome-scale" id="absolute" value="absolute">
        <label for="absolute">Absolute</label>
      </li>
      <br/>
      Orientation
      <li>
        <input type="radio" name="orientation" id="horizontal" value="horizontal" checked>
        <label for="horizontal">Horizontal</label>
      </li>
      <li>
        <input type="radio" name="orientation" id="vertical" value="vertical">
        <label for="vertical">Vertical</label>
      </li>
    </div>
    <div id="ideogram-container"></div>
  </div>
  <script type="text/javascript">

  var initialized = false;

function onIdeogramLoad() {
      // See HomoloGene entry for MTOR at
      // http://www.ncbi.nlm.nih.gov/homologene/3637
      // Placements for H. sapiens and M. musculus used below.
      // Placements from latest annotation release in
      // Human: http://www.ncbi.nlm.nih.gov/gene/2475#genomic-context
      // Mouse: http://www.ncbi.nlm.nih.gov/gene/56717#genomic-context

      var chrs, chr1, chr4, syntheticRegions, humanTaxid, mouseTaxid;

      humanTaxid = ideogram.getTaxid('human');
      mouseTaxid = ideogram.getTaxid('mouse');

      var chrs = ideogram.chromosomes,
        chr1 = chrs[humanTaxid]['1'],
        chr4 = chrs[mouseTaxid]['4'],
        chr19 = chrs[mouseTaxid]['19'],
        syntenicRegions = [];

      range1 = {
        chr: chr1,
        start: 11106531,
        stop: 11262557,
        orientation: 'reverse'
      };

      range2 = {
        chr: chr4,
        start: 148448582,
        stop: 148557685
      };
      // range2 = {
      //   chr: chr19,
      //   start: 61431564,
      //   stop: 61431565 // end of mouse chr19
      // };

      syntenicRegions.push({'r1': range1, 'r2': range2});

      var chr10 = chrs[humanTaxid]['10'];
      var range3 = {
        chr: chr10,
        start: 87864470,
        stop: 87965472
      };
      var range4 = {
        chr: chr19,
        start: 32758445,
        stop: 32820028
      };
      syntenicRegions.push({'r1': range3, 'r2': range4});

      var range5 = {
        chr: chr10,
        start: 26216810,
        stop: 26300961
      }
      var range6 = {
        chr: chrs[mouseTaxid]['2'],
        start: 22622663,
        stop: 22690346
      };
      syntenicRegions.push({'r1': range5, 'r2': range6});

      ideogram.drawSynteny(syntenicRegions);
    }

    // Record app state in URL
    function updateUrl(params) {
      var urlParams = Object.keys(params).map(key => {
        return key + '=' + params[key];
      }).join('&');
      history.pushState(null, null, '?' + urlParams);
    }

    function parseUrlParams() {
      var rawParams = document.location.search;
      var urlParams = {};
      var param, key, value;
      if (rawParams !== '') {
        rawParams = rawParams.split('?')[1].split('&');
        rawParams.forEach(rawParam => {
          param = rawParam.split('=');
          key = param[0];
          value = param[1];
          urlParams[key] = value;
        });
      }
      return urlParams;
    }

    function checkButtons() {
      var urlParams = parseUrlParams();
        for (var param in urlParams) {
          var value = urlParams[param];
          document.querySelectorAll('input[name=' + param + ']').forEach(option => {
            if (option.id.includes(value)) {
              var button = 'input[name=' + param + ']#' + value;
              document.querySelector(button).checked = true;
            }
          });
        }
    }

    function updateIdeogram() {

      if (initialized === false) {
        checkButtons();
      }

      var chromosomeScale = document.querySelector('input[name=chromosome-scale]:checked').id;
      var orientation = document.querySelector('input[name=orientation]:checked').id;

      updateUrl({'chromosome-scale': chromosomeScale, orientation: orientation});

      config = {
        organism: ['human', 'mouse'],
        orientation: orientation,
        geometry: 'collinear',
        chromosomeScale: chromosomeScale,
        chrHeight: 40,
        chrMargin: 3,
        container: '#ideogram-container',
        onLoad: onIdeogramLoad
      }

      ideogram = new Ideogram(config);

      initialized = true;
    }

    radioButtons = document.querySelectorAll('input[type=radio]');
    radioButtons.forEach(function(radioButton) {
      radioButton.addEventListener('click', function() {
        updateIdeogram();
      });
    });

    updateIdeogram();

  </script>

</body>
</html>
